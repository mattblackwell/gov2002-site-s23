<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-03-30">

<title>Gov 2002 - Gov 2002: Problem Set 7</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../files/img/gov2002-shield.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Gov 2002</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../materials/index.html">
 <span class="menu-text">Materials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../assignments/index.html" aria-current="page">
 <span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://edstem.org/us/courses/31660/">
 <span class="menu-text">Ed</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.gradescope.com/courses/415456">
 <span class="menu-text">Gradescope</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Gov 2002: Problem Set 7</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Resources</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/index.html" class="sidebar-item-text sidebar-link">Assignments overview</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/problem-sets.html" class="sidebar-item-text sidebar-link">Problem set instructions</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Assignments</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/01_problem_set.html" class="sidebar-item-text sidebar-link">Problem Set 1</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/02_problem_set.html" class="sidebar-item-text sidebar-link">Problem Set 2</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/03_problem_set.html" class="sidebar-item-text sidebar-link">Problem Set 3</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/04_problem_set.html" class="sidebar-item-text sidebar-link">Problem Set 4</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/05_problem_set.html" class="sidebar-item-text sidebar-link">Problem Set 5</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/06_problem_set.html" class="sidebar-item-text sidebar-link">Problem Set 6</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/07_problem_set.html" class="sidebar-item-text sidebar-link active">Problem Set 7</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/08_problem_set.html" class="sidebar-item-text sidebar-link">Problem Set 8</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/09_problem_set.html" class="sidebar-item-text sidebar-link">Problem Set 9</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../assignments/10_problem_set.html" class="sidebar-item-text sidebar-link">Problem Set 10</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#problem-set-instructions" id="toc-problem-set-instructions" class="nav-link active" data-scroll-target="#problem-set-instructions">Problem Set Instructions</a></li>
  <li><a href="#question-1-20-points" id="toc-question-1-20-points" class="nav-link" data-scroll-target="#question-1-20-points">Question 1 (20 points)</a></li>
  <li><a href="#question-2-20-points" id="toc-question-2-20-points" class="nav-link" data-scroll-target="#question-2-20-points">Question 2 (20 points)</a></li>
  <li><a href="#question-3-20-points" id="toc-question-3-20-points" class="nav-link" data-scroll-target="#question-3-20-points">Question 3 (20 points)</a></li>
  <li><a href="#question-4-20-points" id="toc-question-4-20-points" class="nav-link" data-scroll-target="#question-4-20-points">Question 4 (20 points)</a></li>
  <li><a href="#question-5-20-points" id="toc-question-5-20-points" class="nav-link" data-scroll-target="#question-5-20-points">Question 5 (20 points)</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Gov 2002: Problem Set 7</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 30, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p><a href="../assignments/problem-sets.html">Submission instructions</a> | <a href="../files/assignments/pset_7.pdf">PDF <i class="fa-regular fa-file-pdf" aria-label="file-pdf"></i></a> | <a href="../files/assignments/pset_7.Rmd">Rmd <i class="fa-regular fa-file-code" aria-label="file-code"></i></a> |</p>
<section id="problem-set-instructions" class="level2">
<h2 class="anchored" data-anchor-id="problem-set-instructions">Problem Set Instructions</h2>
<p>This problem set is due on <strong>Apr.&nbsp;5th, 11:59 pm</strong> Eastern time. Please upload a PDF of your solutions to Gradescope. We will accept hand-written solutions but we strongly advise you to typeset your answers in Rmarkdown. Please list the names of other students you worked with on this problem set.</p>
</section>
<section id="question-1-20-points" class="level2">
<h2 class="anchored" data-anchor-id="question-1-20-points">Question 1 (20 points)</h2>
<p>A welfare policy is applied to a group of <span class="math inline">\(n\)</span> people to counter job loss caused by trade shocks, resulting in <span class="math inline">\(X_1, \ldots, X_n\)</span> which are i.i.d. <span class="math inline">\(\mathcal{N}(\theta, 1)\)</span>, where <span class="math inline">\(\theta\)</span> is the theoretical mean effect of the remedy (e.g., the logged wage difference between new and old jobs), defined so that <span class="math inline">\(\theta&gt;0\)</span> if the remedy is helpful on average, <span class="math inline">\(\theta&lt;0\)</span> if it is harmful on average, and <span class="math inline">\(\theta=0\)</span> if it does nothing. Let our Type I error rate be <span class="math inline">\(\alpha=0.05\)</span>. Consider testing <span class="math inline">\(H_0: \theta=0\)</span> versus <span class="math inline">\(H_1: \theta \neq 0\)</span>. Let the rejection region be <span class="math display">\[
\mathcal{R}=\{\mathrm{x}:|\hat{\theta}_{PI}|&gt;c\},
\]</span> where <span class="math inline">\(\hat{\theta}_{PI}\)</span> is the plug-in estimator of <span class="math inline">\(\theta\)</span>.</p>
<ol type="a">
<li><p>Find <span class="math inline">\(c\)</span> so that the test has Type I error rate (i.e., size) equal to <span class="math inline">\(\alpha\)</span>. (Note that <span class="math inline">\(c\)</span> will depend on the sample size, <span class="math inline">\(n\)</span>.)</p></li>
<li><p>Find the power of the test, <span class="math inline">\(\beta(\theta)\)</span>, for <span class="math inline">\(\theta &gt; 0\)</span></p></li>
<li><p>Prove that when <span class="math inline">\(\theta \neq 0\)</span>, the power <span class="math inline">\(\beta(\theta) \to 1\)</span> as <span class="math inline">\(n \to \infty\)</span>.</p></li>
<li><p>Suppose now that <span class="math inline">\(n = 10^4\)</span> and we observe <span class="math inline">\(\bar x = 0.02\)</span>. What is the p-value? Does the test say to reject or retain <span class="math inline">\(H_0\)</span>?</p></li>
</ol>
</section>
<section id="question-2-20-points" class="level2">
<h2 class="anchored" data-anchor-id="question-2-20-points">Question 2 (20 points)</h2>
<p>In recent years it has become common in statistics to want to perform many simultaneous hypothesis tests. Let <span class="math inline">\(p_1 \dots p_m\)</span> be indepedent p-values, corresponding to <span class="math inline">\(m\)</span> hypothesis tests. Each of the <span class="math inline">\(m\)</span> hypothesis tests has a simple null. Suppose that <span class="math inline">\(m_0\)</span> of the <span class="math inline">\(m\)</span> null hypotheses are true. We decide in advance to conduct these tests at level <span class="math inline">\(\alpha\)</span> (i.e., we reject the null for tests where the p-value is less than <span class="math inline">\(\alpha\)</span>). The is the probability of making at least one Type I error. For the purposes of this question, you may assume that the <span class="math inline">\(p\)</span>-values follow a continuous uniform distribution (think about why).</p>
<ol type="a">
<li><p>Find the familywise error rate. What happens to the familywise error rate as <span class="math inline">\(m_0\)</span> gets large?</p></li>
<li><p>The is described as follows: instead of rejecting the null hypotheses with <span class="math inline">\(p_i &lt; \alpha\)</span>, we reject the null hypotheses with <span class="math inline">\(p_i &lt; \frac{\alpha}{m}\)</span>. Show that under this procedure, the familywise error rate is at most <span class="math inline">\(\alpha\)</span>. (Hint: You might find Markov’s Inequality helpful: <span class="math inline">\(\mathrm{P}(X \geq a) \leq \frac{\mathbb{E}[X]}{a}\)</span>)</p></li>
<li><p>In (b), why not instead reject the null hypotheses with <span class="math inline">\(p_i&lt;\frac{\alpha}{m_0}\)</span>, considering that <span class="math inline">\(m_0 \leq m\)</span> (and often in practice <span class="math inline">\(m_0\)</span> is much smaller than <span class="math inline">\(m\)</span> ), which would seem to result in rejecting more false nulls while still keeping the familywise error rate at most <span class="math inline">\(\alpha\)</span>?</p></li>
<li><p>Another procedure is to reject all null hypotheses with <span class="math inline">\(p_i&lt;1-(1-\alpha)^{1 / m}\)</span> (This is known as the Sidak Procedure). Show that under this procedure, the familywise error rate is again at most <span class="math inline">\(\alpha\)</span>.</p></li>
</ol>
</section>
<section id="question-3-20-points" class="level2">
<h2 class="anchored" data-anchor-id="question-3-20-points">Question 3 (20 points)</h2>
<p>In the case Hazelwood School District v. United States (1977), which went to the Supreme Court, the United States argued that the Hazelwood School District in Missouri was practicing racial discrimination in their hiring of teachers. Data were presented showing that only 15 out of <span class="math inline">\(405(3.7 \%)\)</span> of the teachers hired by the school district were black.</p>
<ol type="a">
<li><p>In the original case, the District Court ruled in favor of the school district, saying “The number of black teachers employed by the Hazelwood district is undeniably meager. Nonetheless, it has kept pace with the small but steadily increasing black enrollment in the district. For the 1970-71 school year the six black teachers hired by the Hazelwood district comprised less than one percent of its total faculty. However, the number of black students enrolled during that period was likewise only one percent of the total district attendance.” The United States appealed this decision, arguing that the relevant population for comparison was the teachers in St.&nbsp;Louis County and St.&nbsp;Louis City, not the students in the Hazelwood district. (St.&nbsp;Louis City borders but is not included in St.&nbsp;Louis County, since the city seceded from the county in 1876.) About <span class="math inline">\(15.4 \%\)</span> of the teachers in this population were black, which intuitively seems like a massive disparity compared with the <span class="math inline">\(3.7 \%\)</span> statistic in the Hazelwood district. The Appeals Court ruled in favor of the United States. The school district then appealed the Appeals Court decision to the Supreme Court, arguing that St.&nbsp;Louis City should be excluded from the population for comparison, due to the city having very different hiring guidelines than were present in the county. Discuss the principles and considerations you would use in deciding on the population to compare the Hazelwood district statistic with. (You do not need to resolve the question of whether teachers in St.&nbsp;Louis City should be included in the comparison population.)</p></li>
<li><p>The Supreme Court ruled that the comparison should be with St.&nbsp;Louis County, excluding St.&nbsp;Louis City. In St.&nbsp;Louis County, <span class="math inline">\(5.7 \%\)</span> of teachers were black. Suppose that, before observing the data for Hazelwood district, we know that <span class="math inline">\(n=405\)</span> teachers will be hired and that <span class="math inline">\(X \sim \operatorname{Bin}(n, p)\)</span> of these teachers are black. What would you use as your null and alternative hypotheses if you would like to show that Hazelwood district discriminates against black teachers in their hiring process? Conduct this test, and find the p-value. (We are just looking at disparities in hiring; of course in reality there are many complications such as who applies for which jobs, how people are recruited, what salaries are offered, etc.)</p></li>
<li><p>Repeat (b), except with a Normal approximation to the Binomial</p></li>
<li><p>The majority opinion stated that “the expected value of 23 would be less than two standard deviations from the observed total of <span class="math inline">\(15^{\prime \prime}\)</span>. Is this correct? The Supreme Court concluded that the null hypothesis of no discrimination could not be rejected (presumably setting <span class="math inline">\(\alpha=0.05\)</span> and mentioning”two standard deviations” since <span class="math inline">\(1.96 \approx 2\)</span> ). In a dissenting opinion, Justice Stevens stated that “one of my law clerks advised me that, given the size of the two-year sample, there is only about a <span class="math inline">\(5 \%\)</span> likelihood that a disparity this large would be produced by a random selection from the labor pool.” Was Justice Stevens’s clerk correct? How can the discrepancy between the majority opinion failing to reject the null and Justice Stevens rejecting the null be reconciled?</p></li>
</ol>
</section>
<section id="question-4-20-points" class="level2">
<h2 class="anchored" data-anchor-id="question-4-20-points">Question 4 (20 points)</h2>
<p>Let <span class="math inline">\(X_1, \ldots, X_n\)</span> be i.i.d. Exponential r.v.s with mean <span class="math inline">\(\mu\)</span>. We aim to test <span class="math inline">\(H_0: \mu \leq 1\)</span> vs.&nbsp;<span class="math inline">\(H_1: \mu&gt;1\)</span>. Set your seed to 02138 for simulation exercises.</p>
<ol type="a">
<li><p>Derive a test statistic based on the MLE for <span class="math inline">\(\mu\)</span> along with a rejection region that produces a test of size <span class="math inline">\(\alpha\)</span>. This rejection region should not be based on asymptotics. For <span class="math inline">\(n = 100\)</span> and <span class="math inline">\(\alpha = 0.05\)</span>, calculate the critical value based on your analytical results (Hint: For <span class="math inline">\(X_1, \ldots, X_n \sim^{iid}\)</span> Expo(<span class="math inline">\(\lambda\)</span>), <span class="math inline">\(\sum_{i=1}^{n} X_i \sim \text{Gamma}(n, \frac{1}{\lambda})\)</span>, you may find R functions like and } helpful)</p></li>
<li><p>Derive a second test statistic based on using large sample theory (asymptotics) for the MLE of <span class="math inline">\(\mu\)</span> (so now you should assume the sample size <span class="math inline">\(n\)</span> is large). Derive the associated rejection region for a test that is approximately of size <span class="math inline">\(\alpha\)</span>.</p></li>
<li><p>Simulate 1000 data sets each of size <span class="math inline">\(n=5\)</span> i.i.d. Exponentials with mean <span class="math inline">\(\mu=1\)</span>. Conduct both tests (from (a) and (b)) on each data set for a Type I error rate of <span class="math inline">\(\alpha=0.025\)</span>, and calculate the fraction of times each test leads to a rejection of the null hypothesis across the 1000 data sets. Compare these fractions to the <span class="math inline">\(\alpha\)</span>. Discuss this result.</p></li>
</ol>
</section>
<section id="question-5-20-points" class="level2">
<h2 class="anchored" data-anchor-id="question-5-20-points">Question 5 (20 points)</h2>
<p>Let <span class="math inline">\(Y_1, \ldots, Y_n\)</span> be i.i.d. random variables such that <span class="math inline">\(E\left(Y_i\right)=0, \operatorname{Var}\left(Y_i\right)=1\)</span>, and the fourth moment <span class="math inline">\(E\left(Y_i^4\right)\)</span> exists.</p>
<ol type="a">
<li><p>Define <span class="math display">\[
S_n=\frac{1}{n} \sum_{i=1}^n Y_i^2, \qquad V_n=\frac{1}{n} \sum_{i=1}^n\left(Y_i^2-1\right)^2 .
\]</span> Prove the following asymptotic result: <span class="math display">\[
\frac{\sqrt{n} \cdot\left(S_n-1\right)}{\sqrt{V_n}} \stackrel{d}{\rightarrow} \mathcal{N}(0,1) .
\]</span> Hint: Start by applying the CLT to <span class="math inline">\(S_n\)</span> and the LLN to <span class="math inline">\(V_n\)</span>.</p></li>
<li><p>Find the constant <span class="math inline">\(c\)</span> such that <span class="math display">\[
c \cdot \frac{\sqrt{n}\left(\exp \left(S_n\right)-e\right)}{\sqrt{V_n}} \stackrel{D}{\rightarrow} \mathcal{N}(0,1)
\]</span> Hint: what does <span class="math inline">\(\sqrt{n}(\exp(S_{n}) - e)\)</span> converge in distribution to?</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>